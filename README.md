<p align="center">
  <img src="https://img.shields.io/badge/vue-ring component---" alt="vue ring component">
  <img src="https://img.shields.io/badge/style-easy---" alt="easy">
</p>

## Choose Language/é€‰æ‹©è¯­è¨€
- [ä¸­æ–‡](#user-content-chinese)
- [English](#user-content-english)

<a name="chinese"></a>

## -ä¸­æ–‡æ–‡æ¡£

## ä»‹ç»

è¿™æ˜¯ä¸€ä¸ª**ä½¿ç”¨ç®€å•ã€é€šç”¨ã€é…·ç‚«**çš„å‰ç«¯é“ƒå£°ğŸ””ç»„ä»¶ï½

å¯ç”¨äºé“ƒå£°ã€æ¶ˆæ¯æç¤ºéŸ³ã€äº¤äº’éŸ³æ•ˆç­‰è¯¸å¤šåœºæ™¯ã€‚

## ç‰¹ç‚¹
- æ”¯æŒå¤šç§å¼€å‘ç¯å¢ƒã€‚å¯åœ¨Vueã€Reactã€çº¯jsï¼ˆES6+ï¼‰ä¸­ä½¿ç”¨
- æ”¯æŒå¤šç§è°ƒç”¨é£æ ¼ã€‚æœ‰Vueç»„ä»¶ã€Reactç»„ä»¶ã€ä»¥åŠjså‡½æ•°è°ƒç”¨ä¸‰ç§é£æ ¼
- å¯è‡ªå®šä¹‰éŸ³é¢‘æº
- æ”¯æŒä½¿ç”¨ç®€è°±æ¥è‡ªå®šä¹‰ä¹æ›²éŸ³æ•ˆ
- å†…ç½®é»˜è®¤éŸ³æ•ˆ
- å¾ªç¯æ’­æ”¾/å•æ’­æ”¾

## å‚æ•°

| å‚æ•°å | ç±»å‹    |  å¿…é¡»  | é»˜è®¤å€¼ | è¯´æ˜                                                         |
| ------ | ------- | ------- | ------------------ | ------------------------------------------------------------ |
| open   | Boolean | âˆš | false  | å¼€å¯ç»„ä»¶ã€‚å°†å…¶è®¾ä¸ºtrueæ˜¯ä½¿ç”¨æœ¬ç»„ä»¶çš„å‰æ |
| ring   | Boolean | âˆš |false  | æ˜¯å¦å¼€å§‹æ’­æ”¾éŸ³æ•ˆã€‚å½“è®¾ç½®ä¸ºfalseæ—¶ï¼Œåˆ™ä¸ºå…³é—­éŸ³æ•ˆ |
| src    | String  | Ã— | ''    | é“ƒå£°éŸ³é¢‘æ–‡ä»¶çš„åœ°å€ï¼Œå¯ä»¥æ˜¯ç½‘ç»œèµ„æºæˆ–è€…é¡¹ç›®å†…èµ„æºã€‚é¡¹ç›®å†…èµ„æºéœ€ä¼ å…¥ç»å¯¹è·¯å¾„ã€‚å¦‚æœä¸æ¸…æ¥šå¦‚ä½•è·å–ç»å¯¹è·¯å¾„ï¼Œå¯å‚è§ä¸‹æ–‡ã€Šå…³äºéŸ³æ•ˆ.è‡ªå®šä¹‰éŸ³é¢‘æºã€‹ä¸€èŠ‚ï¼Œè¿™å…¶å®éå¸¸ç®€å•             |
| loop    | Boolean | Ã— |  true    |  æ˜¯å¦å¾ªç¯æ’­æ”¾               |
|   defaultMusic  | String  | Ã— |'EZIOS_FAMILY'    | é»˜è®¤é“ƒå£°æ›²ç›®ã€‚ç›®å‰å¯é€‰å€¼ï¼š'LITTLE_STAR' \| 'TWO_TIGERS' \| 'EZIOS_FAMILY' \| 'CASTLE_IN_THE_SKY'               |
|  musicText   | String  | Ã— | ''    |     ä»¥ç®€è°±æ¥è‡ªå®šä¹‰éŸ³æ•ˆã€‚è¯¦è§ä¸‹æ–‡ã€Šå…³äºéŸ³æ•ˆ.è‡ªå®šä¹‰ç®€è°±éŸ³æ•ˆã€‹ä¸€èŠ‚           |
|  log   | Boolean  | Ã— |true    | æ˜¯å¦æ‰“å°æ—¥å¿—               |
|  ended   | Function  | Ã— |function() {}   | éŸ³é¢‘ï¼ˆä¸€æ¬¡ï¼‰æ’­æ”¾ç»“æŸäº‹ä»¶å›è°ƒ              |
|  setRing   | Function  | âˆš (React) | -   | å¯¹äºReactç»„ä»¶ä¸ºå¿…ä¼ ã€‚ä¼ å…¥çš„å€¼ä¸ºä½¿ç”¨useState Hookåï¼Œringæ‰€å¯¹åº”çš„çŠ¶æ€æ›´æ–°å‡½æ•°ã€‚å…·ä½“å¯å‚è€ƒã€Šä½¿ç”¨.Reactç»„ä»¶å½¢å¼ã€‹é‡Œçš„ä¾‹å­              |


## å®‰è£…

```javascript
npm i easy-ring
```

## ä½¿ç”¨
ä½¿ç”¨easy-ringåªéœ€è¦ç®€å•çš„ä¸‰ä¸ªæ“ä½œï¼Œ
- â‘  å¼€å¯ç»„ä»¶ã€‚
- â‘¡ æ’­æ”¾éŸ³æ•ˆã€‚å¯ä»¥è®©ç»„ä»¶å¼€å§‹å“èµ·ã€‚
- â‘¢ æš‚åœéŸ³æ•ˆã€‚å¯ä»¥è®©ç»„ä»¶å®‰é™ä¸‹æ¥ã€‚

ä¸åŒé£æ ¼çš„ä½¿ç”¨æ–¹å¼åŸºæœ¬éƒ½éµå¾ªè¿™ä¸‰ä¸ªæ“ä½œï¼Œåªæ˜¯åœ¨ä½¿ç”¨ç»†èŠ‚ä¸Šæœ‰ä¸€äº›å·®å¼‚ã€‚

### 1ï¼‰Vueç»„ä»¶å½¢å¼
å½“ä½œä¸€èˆ¬çš„Vueç»„ä»¶å¼•å…¥ã€ä½¿ç”¨å³å¯ã€‚ä¸»è¦é€šè¿‡openã€ringå‚æ•°è¿›è¡Œæ§åˆ¶ã€‚

- â‘  å¼€å¯ç»„ä»¶ï¼šå°†openå‚æ•°è®¾ç½®ä¸ºtrueã€‚
***PSï¼šè¿™ä¸€æ­¥éœ€è¦æ”¾åˆ°ä¸€ä¸ªäº¤äº’ï¼ˆæ¯”å¦‚ï¼šæŒ‰é’®ç‚¹å‡»ï¼‰é‡Œè¿›è¡Œè§¦å‘ï¼Œè¿™æ˜¯ä¸ºäº†è§„é¿ç›®å‰æµè§ˆå™¨çš„é™åˆ¶ã€‚è¯¦ç»†å¯å‚è§ä¸‹æ–‡ ã€Šå…³äºopenå‚æ•°ä»¥åŠæµè§ˆå™¨é™åˆ¶çš„è§£é‡Šã€‹ä¸€ç« ***
- â‘¡ æ’­æ”¾éŸ³æ•ˆï¼šå°†ringå‚æ•°è®¾ç½®ä¸ºtrue
- â‘¢ æš‚åœéŸ³æ•ˆï¼šå°†ringå‚æ•°è®¾ç½®ä¸ºfalse

æ ¹æ®è‡ªå·±çš„éœ€æ±‚å’Œæƒ³è¦çš„æ•ˆæœï¼Œè‡ªè¡Œå†³å®šä½•æ—¶æ’­æ”¾ã€æš‚åœéŸ³æ•ˆï¼Œåªéœ€åœ¨å¯¹åº”çš„é€»è¾‘ä»£ç ä¸‹æ§åˆ¶ringå‚æ•°å€¼çš„æ›´æ–°å³å¯

è¿™é‡Œåˆ†åˆ«æä¾›äº†Vue2ã€Vue3çš„ä¾‹å­è¿›è¡Œå‚è€ƒï¼š

#### Vue2çš„å†™æ³•

```javascript
<template>
    <easy-ring
        :open="open"
        :ring.sync="ring" // æ³¨æ„ï¼šè¿™é‡Œéœ€è¦ä½¿ç”¨åŒå‘ç»‘å®š 
        :src="yourAudio"
    />
</template>

<script>
import { EasyRingVueComponent as EasyRing } from 'easy-ring'
import yourAudio from '@/assets/yourAudio.wav'
import msg from 'msg'

export default {
    components: {
        EasyRing
    }
    data() {
        return {
            open: false,
            ring: false
        }
    },
    methods: {
        openComponent() {
            if (confirm('æˆ‘ä»¬éœ€è¦æ‚¨åŒæ„å¼€å¯å£°éŸ³')) {
                this.open = true // â‘  å¼€å¯ç»„ä»¶
            }
        }
    },
    mounted() {
        this.openComponent()

        msg.listening()

        msg.onReceived(() => {
            this.ring = true // â‘¡ æ’­æ”¾éŸ³æ•ˆ
        })

        msg.onRead(() => {
            this.ring = false // â‘¢ æš‚åœéŸ³æ•ˆ
        })
    }
}
</script>
```
#### Vue3çš„å†™æ³•
```javascript
<template>
    <easy-ring
        :open="open"
        v-model:ring="ring" // æ³¨æ„ï¼šè¿™é‡Œéœ€è¦ä½¿ç”¨åŒå‘ç»‘å®š 
        :src="yourAudio"
    />
</template>

<script setup>
import { ref } from 'vue'
import { EasyRingVueComponent as EasyRing } from 'easy-ring'
import yourAudio from '@/assets/yourAudio.wav'
import msg from 'msg'

const open = ref(false)
const ring = ref(false)
const openComponent = () => {
    if (confirm('æˆ‘ä»¬éœ€è¦æ‚¨åŒæ„å¼€å¯å£°éŸ³')) {
        open.value = true // â‘  å¼€å¯ç»„ä»¶
    }
}

openComponent()
msg.listening()
msg.onReceived(() => {
    ring.value = true // â‘¡ æ’­æ”¾éŸ³æ•ˆ
})

msg.onRead(() => {
    ring.value = false // â‘¢ æš‚åœéŸ³æ•ˆ
})

</script>
```
Vue2 DEMOé¡¹ç›®åœ°å€ï¼šhttps://github.com/xun19/easy-ring/tree/master/easy-ring-demo-vue2
Vue3 DEMOé¡¹ç›®åœ°å€ï¼šhttps://github.com/xun19/easy-ring/tree/master/easy-ring-demo-vue3

### 2ï¼‰Reactç»„ä»¶å½¢å¼
å½“ä½œä¸€èˆ¬çš„Reactç»„ä»¶å¼•å…¥ã€ä½¿ç”¨å³å¯ã€‚ä¸»è¦é€šè¿‡openã€ringå‚æ•°è¿›è¡Œæ§åˆ¶ã€‚

- â‘  å¼€å¯ç»„ä»¶ï¼šå°†openå‚æ•°è®¾ç½®ä¸ºtrueã€‚
***PSï¼šè¿™ä¸€æ­¥éœ€è¦æ”¾åˆ°ä¸€ä¸ªäº¤äº’ï¼ˆæ¯”å¦‚ï¼šæŒ‰é’®ç‚¹å‡»ï¼‰é‡Œè¿›è¡Œè§¦å‘ï¼Œè¿™æ˜¯ä¸ºäº†è§„é¿ç›®å‰æµè§ˆå™¨çš„é™åˆ¶ã€‚è¯¦ç»†å¯å‚è§ä¸‹æ–‡ ã€Šå…³äºopenå‚æ•°ä»¥åŠæµè§ˆå™¨é™åˆ¶çš„è§£é‡Šã€‹ä¸€ç« ***
- â‘¡ æ’­æ”¾éŸ³æ•ˆï¼šå°†ringå‚æ•°è®¾ç½®ä¸ºtrue
- â‘¢ æš‚åœéŸ³æ•ˆï¼šå°†ringå‚æ•°è®¾ç½®ä¸ºfalse

æ ¹æ®è‡ªå·±çš„éœ€æ±‚å’Œæƒ³è¦çš„æ•ˆæœï¼Œè‡ªè¡Œå†³å®šä½•æ—¶æ’­æ”¾ã€æš‚åœéŸ³æ•ˆï¼Œåªéœ€åœ¨å¯¹åº”çš„é€»è¾‘ä»£ç ä¸‹æ§åˆ¶ringå‚æ•°å€¼çš„æ›´æ–°å³å¯

PS: å¦å¤–ï¼Œä¸è¦å¿˜è®°ä¼ å…¥ä¸€ä¸ªsetRingå‚æ•°ï¼Œå®ƒå®é™…å°±æ˜¯ringå‚æ•°æ‰€å¯¹åº”çš„çŠ¶æ€æ›´æ–°å‡½æ•°ï¼Œeasy-ringå°†ç”¨å®ƒæ¥åšä¸€äº›çŠ¶æ€è‡ªåŠ¨æ›´æ–°çš„æ“ä½œã€‚è¿™å°†è®©easy-ringä½¿ç”¨èµ·æ¥æ›´å‚»ç“œã€æ›´è‡ªåŠ¨åŒ–ã€‚

è¿™é‡Œæä¾›äº†ä¸€ä¸ªå¯ä¾›å‚è€ƒçš„ä¾‹å­ï¼š

```javascript
import { useState, useEffect } from 'react'
import { EasyRingReactComponent as EasyRing } from 'easy-ring'
import msg from 'msg'

export default Demo = () => {
    const [open, setOpen] = useState(false)
    const [ring, setRing] = useState(false)

    const getMsg = () => {
        msg.listening()
        msg.onReceived(() => {
            setRing(true) // â‘¡ æ’­æ”¾éŸ³æ•ˆ
        })

        msg.onRead(() => {
            setRing(false) // â‘¢ æš‚åœéŸ³æ•ˆ
        })
    }
    const openComponent = () => {
        if (confirm('æˆ‘ä»¬éœ€è¦æ‚¨åŒæ„å¼€å¯å£°éŸ³')) {
            setOpen(true) // â‘  å¼€å¯ç»„ä»¶
        }
    }

    useEffect(() => {
        this.openComponent()
        this.getMsg()
    }, [])

    return (
        <div>
          <EasyRing 
            open={this.state.open} 
            ring={this.state.ring}
            setRing={setRing} //  æ³¨æ„ï¼šè¯·è®°å¾—ä¼ å…¥è¿™ä¸ªå‚æ•°
          ></EasyRing>
        </div>
    )
}
```
DEMOé¡¹ç›®åœ°å€ï¼šhttps://github.com/xun19/easy-ring/tree/master/easy-ring-demo-react
### 3ï¼‰jså‡½æ•°è°ƒç”¨çš„å½¢å¼
easy-ringæä¾›äº†ä¸€ä¸ªCommonEasyRingç±»ï¼Œè¯¥ç±»çš„å®ä¾‹æœ‰4ä¸ªæ–¹æ³•ï¼šopen( )ã€ring( )ã€stop( )ã€close( )ï¼Œåˆ†åˆ«ç”¨äºå¼€å¯ç»„ä»¶ã€æ’­æ”¾éŸ³æ•ˆã€æš‚åœéŸ³æ•ˆã€å…³é—­ç»„ä»¶ã€‚

- â‘  å¼€å¯ç»„ä»¶ï¼šopen( )
***PSï¼šè¿™ä¸€æ­¥éœ€è¦æ”¾åˆ°ä¸€ä¸ªäº¤äº’ï¼ˆæ¯”å¦‚ï¼šæŒ‰é’®ç‚¹å‡»ï¼‰é‡Œè¿›è¡Œè§¦å‘ï¼Œè¿™æ˜¯ä¸ºäº†è§„é¿ç›®å‰æµè§ˆå™¨çš„é™åˆ¶ã€‚è¯¦ç»†å¯å‚è§ä¸‹æ–‡ ã€Šå…³äºopenå‚æ•°ä»¥åŠæµè§ˆå™¨é™åˆ¶çš„è§£é‡Šã€‹ä¸€ç« ***
- â‘¡ æ’­æ”¾éŸ³æ•ˆï¼šring( )
- â‘¢ æš‚åœéŸ³æ•ˆï¼šstop( )
- â‘£ å…³é—­ç»„ä»¶ï¼šclose( )

ä¸‹é¢æ˜¯ä¸€ä¸ªå¯ä¾›å‚è€ƒçš„ä¾‹å­ï¼š

```javascript
const myEasyring = new CommonEasyRing()  

button.addEventListener('click', () => {
    if (confirm('æˆ‘ä»¬éœ€è¦æ‚¨åŒæ„å¼€å¯å£°éŸ³ ï½œ We need your consent to turn on sound')) {
        myEasyring.open() // â‘  å¼€å¯ç»„ä»¶
    }
})

msg.listening()

msg.onReceived(() => {
    myEasyring.ring() // â‘¡ æ’­æ”¾éŸ³æ•ˆ
})

msg.onRead(() => {
    myEasyring.stop() // â‘¢ æš‚åœéŸ³æ•ˆ
})

msg.onUnmount(() => {
    myEasyring.close() // â‘£ å…³é—­ç»„ä»¶
})
```

## å…³äºéŸ³æ•ˆ
æœ¬ç»„ä»¶æœ‰ä¸‰ç§éŸ³æ•ˆçš„ä½¿ç”¨æ–¹å¼ï¼šè‡ªå®šä¹‰éŸ³é¢‘æºã€è‡ªå®šä¹‰ç®€è°±éŸ³æ•ˆã€å†…ç½®é»˜è®¤éŸ³æ•ˆã€‚å¯æ ¹æ®éœ€æ±‚é€‰æ‹©è‡ªå·±å–œæ¬¢çš„æ–¹å¼ã€‚

è¿™ä¸‰ç§éŸ³æ•ˆçš„æ’­æ”¾ä¼˜å…ˆçº§ä¸º: è‡ªå®šä¹‰éŸ³é¢‘æº > è‡ªå®šä¹‰ç®€è°±éŸ³æ•ˆ > å†…ç½®é»˜è®¤éŸ³æ•ˆ

### 1ï¼‰è‡ªå®šä¹‰éŸ³é¢‘æº
å°†ä½ çš„éŸ³é¢‘æ–‡ä»¶åœ°å€ä¼ ç»™ç»„ä»¶çš„srcå‚æ•°ï¼Œå³å¯ä½¿ç”¨è‡ªå®šä¹‰éŸ³é¢‘æºã€‚å¯ä»¥æ˜¯ç½‘ç»œèµ„æºæˆ–è€…é¡¹ç›®å†…èµ„æºã€‚

é¡¹ç›®å†…èµ„æºé‡‡ç”¨çš„æ˜¯ç»å¯¹è·¯å¾„ï¼Œå› ä¸ºä½¿ç”¨ç›¸å¯¹è·¯å¾„å®¹æ˜“åœ¨æœ¬åœ°æ„å»ºæˆ–è€…æ‰“åŒ…è¿‡ç¨‹ä¸­å‡ºç°é—®é¢˜ï¼Œä¸”ä½œä¸ºç¬¬ä¸‰æ–¹ç»„ä»¶çš„easy-ringæ— æ³•ä»ä½ é¡¹ç›®é‡Œçš„ç›¸å¯¹è·¯å¾„æ‰¾åˆ°éŸ³é¢‘æ–‡ä»¶ã€‚

è·å–ç»å¯¹è·¯å¾„å…¶å®éå¸¸ç®€å•ï¼Œåœ¨Vueæˆ–è€…Reactç¯å¢ƒï¼ˆå¯èƒ½ä¹ŸåŒ…æ‹¬å…¶ä»–æ„å»ºç¯å¢ƒï¼‰ä¸­ä½¿ç”¨ä¸‹åˆ—æ–¹å¼ï¼š
```javascript
import yourAudio from '@/assets/yourAudio.wav'
```
æ­¤æ—¶yourAudioå˜é‡å°±æ˜¯ä½ éŸ³é¢‘æ–‡ä»¶çš„ç»å¯¹è·¯å¾„ï¼Œå°†è¿™ä¸ªå˜é‡ä¼ ç»™srcå‚æ•°å³å¯ã€‚

### 2ï¼‰è‡ªå®šä¹‰ç®€è°±éŸ³æ•ˆ
å°†ä¸€ä¸²ç®€è°±çš„å­—ç¬¦ä¸²ä¼ ç»™musicTextå‚æ•°ï¼Œå³å¯ä½¿ç”¨è‡ªå®šä¹‰ç®€è°±éŸ³æ•ˆã€‚

ä¾‹å¦‚ä¸‹é¢ä¾‹å­å±•ç¤ºäº†æ€ä¹ˆä½¿ç”¨ã€Šå°æ˜Ÿæ˜Ÿã€‹çš„éŸ³æ•ˆï¼š
```javascript
    /* in Vue */
    <EasyRing
      :open="open"
      :ring="ring"
      musicText="1 1 5 5 6 6 5 - 4 4 3 3 2 2 1 - 5 5 4 4 3 3 2 - 5 5 4 4 3 3 2 - 1 1 5 5 6 6 5 - 4 4 3 3 2 2 1 - - - -"
    />

    /* in React */
    <EasyRing
      open={this.state.open}
      ring={this.state.ring}
      musicText="1 1 5 5 6 6 5 - 4 4 3 3 2 2 1 - 5 5 4 4 3 3 2 - 5 5 4 4 3 3 2 - 1 1 5 5 6 6 5 - 4 4 3 3 2 2 1 - - - -"
    />

    /* in JS */
    const myEasyring = new CommonEasyRing({
        musicText: '1 1 5 5 6 6 5 - 4 4 3 3 2 2 1 - 5 5 4 4 3 3 2 - 5 5 4 4 3 3 2 - 1 1 5 5 6 6 5 - 4 4 3 3 2 2 1 - - - -'
    })
```
musicTextå‚æ•°çš„å€¼éœ€è¦æ˜¯ä¸€ä¸²å­—ç¬¦ä¸²ï¼Œé‡Œé¢ä¸»è¦ç”±æ•°å­—ã€"-"ç»„æˆï¼Œå¹¶ä»¥ä¸€ä¸ªç©ºæ ¼è¿›è¡Œé—´éš”åŒºåˆ†ã€‚
| å­—ç¬¦ | å¯¹åº”| è¯´æ˜                                                         |
| ------ | ------- | ------ |
| .1 ~ .7  | ä½éŸ³ | æ³¨æ„å‰é¢çš„ç¬¦å·æ˜¯"."  |
| 1 ~ 7  | ä¸­éŸ³ |   |
| 1. ~ 7.  | é«˜éŸ³ |  æ³¨æ„å‰é¢çš„ç¬¦å·æ˜¯"." |
| -  | ä¸€ä¸ªåœé¡¿å•ä½ | åœé¡¿å•ä½è¿ç»­å¾—è¶Šå¤šï¼Œä»£è¡¨åœé¡¿æ—¶é—´è¶Šé•¿ã€‚æ¯”å¦‚ï¼š "- - -"ä»£è¡¨åœé¡¿ä¸‰ä¸ªå•ä½ |

ä¸‹é¢æ˜¯ç›®å‰æœ¬ç»„ä»¶å†…ç½®çš„å‡ é¦–ç®€è°±ä¹æ›²ï¼Œå¯ç”¨äºå‚è€ƒï¼š
| æ›²å |       musicTextå€¼                                           |
| ------ | ------- |
| å°æ˜Ÿæ˜Ÿï¼ˆLITTLE_STARï¼‰ | '1 1 5 5 6 6 5 - 4 4 3 3 2 2 1 - 5 5 4 4 3 3 2 - 5 5 4 4 3 3 2 - 1 1 5 5 6 6 5 - 4 4 3 3 2 2 1 - - - -' |
| ä¸¤åªè€è™ï¼ˆTWO_TIGERSï¼‰ | '1 2 3 1 - 1 2 3 1 - 3 4 5 - 3 4 5 - - 5 6 5 4 3 - 1 - 5 6 5 4 3 - 1 - 2 - .5 - 1 - - 2 - .5 - 1 - - - -' |
| è‰¾å‰å¥¥ä¹‹å®¶ï¼ˆEZIOS_FAMILYï¼‰ | '.6 - 1 - 2 - 3 - .6 - 1 - 2 - 1 - .6 - 1 - 2 - 3 - .6 - 1 - 2 - 1 - .6 - 1 - 2 - 3 - 6 - 7 - 1. - 2. - 3. - - - - - -' |
| å¤©ç©ºä¹‹åŸï¼ˆCASTLE_IN_THE_SKYï¼‰ | '.6 .7 1 - - .7 1 - 3 - .7 - - - - .3 .3 .6 - - .5 .6 - 1 - .5 - - - - .3 .3 .4 - - .3 .4 - 1 - .3 - - - - 1 1 1 .7 - - .4 .4 - .7 - .7 - - - - -' |


### 3ï¼‰å†…ç½®é»˜è®¤éŸ³æ•ˆ
å¦‚æœæ²¡æœ‰ç»™srcå‚æ•°ã€musicTextå‚æ•°ä¼ é€’å€¼çš„æ—¶å€™ï¼Œç»„ä»¶ä¼šä½¿ç”¨é»˜è®¤éŸ³æ•ˆã€‚ç›®å‰çš„é»˜è®¤éŸ³æ•ˆä¸ºã€ŠEzio's Familyã€‹ï¼Œè¿™æ˜¯æ¸¸æˆã€Šåˆºå®¢ä¿¡æ¡ã€‹çš„ä¸€é¦–ä¸»é¢˜æ›²ã€‚

ä½ ä¹Ÿå¯ä»¥é€šè¿‡è®¾ç½®defaultMusicçš„å€¼æ¥æ›´æ¢é»˜è®¤éŸ³æ•ˆæ›²ç›®ï¼Œç›®å‰æ”¯æŒçš„å¯é€‰å€¼ä¸ºï¼š'LITTLE_STAR'ã€'TWO_TIGERS'ã€'EZIOS_FAMILY'ã€'CASTLE_IN_THE_SKY'ã€‚

è¿™å®é™…ä¸Šè·Ÿè‡ªå®šä¹‰ç®€è°±éŸ³æ•ˆåŠŸèƒ½çš„å®ç°ä½¿ç”¨äº†åŒä¸€ç§æŠ€æœ¯ï¼ˆWeb Audio APIï¼‰ã€‚å¦‚æœä½ æœ‰æ›´å¥½ã€æ›´åŠ¨å¬çš„æ—‹å¾‹ç®€è°±ï¼Œä¹Ÿæ¬¢è¿åœ¨æˆ‘çš„githubæˆ–è€…åšå®¢é‡Œè¿›è¡Œåˆ†äº«ï¼Œåç»­ä¼šè€ƒè™‘å°†æ›´å¤šå†…ç½®éŸ³æ•ˆæ”¾åˆ°ç»„ä»¶é‡Œã€‚ğŸ˜Š
## å…³äºopenå‚æ•°ä»¥åŠæµè§ˆå™¨é™åˆ¶çš„è§£é‡Š

å½“å‰å¤§å¤šæ•°æµè§ˆå™¨ä¸æ”¯æŒè‡ªåŠ¨æ’­æ”¾éŸ³é¢‘ï¼Œè¿™éœ€è¦ç”¨æˆ·è‡ªå·±ä¸»åŠ¨è§¦å‘äº¤äº’åæ‰èƒ½æ’­æ”¾ã€‚å› æ­¤ï¼Œæœ¬ç»„ä»¶æ‰ä¼šå¢åŠ ä¸€ä¸ªopenå‚æ•°ï¼Œç”¨äºï¼ˆæé†’å¼€å‘è€…ï¼‰å®ç°è¿™ä¸€æ“ä½œã€‚

æˆ‘ä»¬éœ€è¦æŠŠâ€œå°†openå‚æ•°è®¾ç½®ä¸ºtrueâ€çš„è¿™ä¸€æ§åˆ¶é€»è¾‘ï¼Œæ”¾åœ¨è§¦å‘ç”¨æˆ·äº¤äº’è¡Œä¸ºçš„äº‹ä»¶å›è°ƒé‡Œï¼Œä¾‹å¦‚ï¼šæŒ‰é’®çš„clickäº‹ä»¶ã€switchå¼€å…³çš„changeäº‹ä»¶ç­‰ã€‚

ä½†æ˜¯ï¼Œä½ å¯ä»¥é€šè¿‡ä¸€äº›äº¤äº’è®¾è®¡æ¥æ·¡åŒ–è¿™ä¸€è¿‡ç¨‹ï¼Œä»è€Œæå‡ç”¨æˆ·ä½“éªŒã€‚æ¯”å¦‚ï¼š
- åœ¨ç”¨æˆ·ç‚¹å‡»â€œç™»å½•â€æŒ‰é’®æ—¶ï¼Œåœ¨clickå›è°ƒé‡Œè®¾ç½®openå‚æ•°ä¸ºtrue
- è®¾ç½®ä¸€ä¸ªéŸ³æ•ˆå¼€å…³ï¼Œåœ¨changeå›è°ƒé‡Œè®¾ç½®openå‚æ•°ä¸ºtrue
- ç‚¹å‡»å¯¼èˆªèœå•çš„æ—¶å€™ï¼Œåœ¨clickå›è°ƒé‡Œè®¾ç½®openå‚æ•°ä¸ºtrue
- åœ¨ç‚¹å‡»æ‰“å¼€æ¶ˆæ¯å¼¹çª—æ—¶ï¼Œåœ¨clickå›è°ƒé‡Œè®¾ç½®openå‚æ•°ä¸ºtrue

ä¸Šé¢çš„ä¾‹å­ä¸å¤ªé€‚ç”¨äºåˆ·æ–°é¡µé¢åçš„æƒ…å†µï¼Œåˆ·æ–°é¡µé¢æƒ…æ™¯ä¸‹ï¼Œä¸ªäººè®¤ä¸ºè¾ƒå¥½çš„æ–¹å¼å¯èƒ½æ˜¯ï¼š
- å¼¹å‡ºä¸€ä¸ªè¯¢é—®â€œæ˜¯å¦å…è®¸å¼€å¯éŸ³æ•ˆâ€çš„å¼¹çª—

## æ„Ÿè°¢
è‡ªå®šä¹‰ç®€è°±éŸ³æ•ˆåŠŸèƒ½çš„å®ç°ï¼Œè¦æ„Ÿè°¢å¼ é‘«æ—­å¤§ä½¬ã€https://www.zhangxinxu.com/wordpress/2017/06/html5-web-audio-api-js-ux-voice/ ã€‘çš„å¯å‘ ã€ä»¥åŠç‹ç¿
å¤§ä½¬ã€https://www.jianshu.com/p/4f4c8bbd9775ã€https://www.zhanhu56.com/h5/music_box/ã€https://github.com/chchlsh/MusicBox ã€‘MusicBoxç»„ä»¶çš„åŠŸèƒ½æ”¯æŒğŸ‘ï¼Œä»–ä»¬çš„çµæ„Ÿå’Œå¸®åŠ©è®©è¿™ä¸ªç»„ä»¶æœ‰äº†æ›´å¤šæ‹“å±•æ€§å’Œä¹è¶£ã€‚

## é¡¹ç›®åœ°å€
https://github.com/xun19/easy-ring

å¦‚æœä½ è§‰å¾—æœ¬ç»„ä»¶ç»™ä½ å¸¦æ¥äº†å¸®åŠ©ï¼Œæ¬¢è¿æ¥ç»™ä¸ªStar~ ğŸ˜Š ä¹Ÿæ¬¢è¿æä¾›å®è´µæ„è§


<a name="english"></a>
## - Document in English 

## Introduction
This is a **general, versatile** and **cool** front-end sound ğŸ”” component~

It can be used in many scenarios such as ringtones, message sounds, interactive sounds, and so on.

## Feature
- Multiple development environments. Available in **Vue, React, VanillaJS/Native JS (ES6+)**.
- Multiple styles for using. You can use this component as **a Vue Component , React Component, and even a JS Object**.
- Customizable audio source.
- Support for **using NMNï¼ˆNumbered musical notationï¼‰ to customize song sounds.**
- Built-in default sound effects.
- Loop and non-loop playing.

## params


| name | type    | required | default | remark                                                         |
| ------ | ------- | ------ | ------------------ | ------------------------------------------------------------ |
| open   | Boolean | âˆš | false  | Open the component. Setting it to 'true' is a prerequisite for using this component. |
| ring   | Boolean | âˆš |false  | Whether to start playing the sound effect. When set to 'false', the sound effect will turn off. |
| src    | String  | Ã— | ''    |  The src of the audio file, which can be a network resource or an intra-project resource. Resources in the project need provide a absolute path. If you are not sure how to get the absolute path, please read the section "About Sound Effects - Custom Audio Source".You will find that it's very easy.             |
| loop    | Boolean | Ã— |  true    |  Whether to loop or not.               |
|   defaultMusic  | String  | Ã— |'EZIOS_FAMILY'    | The default sound effect which you can use  directly. Currently an optional valueï¼š'LITTLE_STAR' \| 'TWO_TIGERS' \| 'EZIOS_FAMILY' \| 'CASTLE_IN_THE_SKY'               |
|  musicText   | String  | Ã— | ''    |     Customize the sound effects with useing a NMNï¼ˆNumbered musical notationï¼‰string. Read the section "About Sound Effects - Custom NMNï¼ˆNumbered musical notationï¼‰ Sound Effects" for more details.          |
|  log   | Boolean  | Ã— |true    | Whether to output the log.               |
|  ended   | Function  | Ã— |function() {}   | A function which be called when the audio end playing ( This refers to the termination of each  playing round of the \<audio />, not the end of the component ).        |
|  setRing   | Function  | âˆš(React) | -   | Required for React components. The value is the state-updating function corresponding to the 'ring' variable after using the React Hook 'useState'. For more details, please refer to the section "Use as a React Component"              |


## Installation
```javascript
npm i easy-ring
```
## Usage
Using easy-ring requires only 3 easy operations,
- â‘  Open the component.
- â‘¡ Play the sound effect. Lets the component start ringing.
- â‘¢ Pause the sound effect. Quiets the component.

Different styles of use basically follow these 3 operations, but there are some differences in the details of use.

### 1ï¼‰Use as an Vue Component
It can be imported and used as a general Vue component. It is mainly controlled by the 'open' and 'ring' parameters.

- â‘  Open component: Set the 'open' to true.
***PS: This step needs to be triggered in an interaction (e.g. button click), which is to circumvent the limitations of the current browser. See the chapter "Explanation of the open parameter and browser limitations" below for details.***
- â‘¡ Play Sound Effect: Set the 'ring' to true

- â‘¢ Pause Sound Effect: Set the 'ring' to false

According to your own needs or effects, decide when to play and pause the sound effect, and control the update of the 'ring' parameter value under the corresponding logic code

Here are examples in Vue2 and Vue3 for reference:
#### Vue2

```javascript
<template>
    <easy-ring
        :open="open"
        :ring.sync="ring" // Note: Bidirectional binding is required here 
        :src="yourAudio"
    />
</template>

<script>
import { EasyRingVueComponent as EasyRing } from 'easy-ring'
import yourAudio from '@/assets/yourAudio.wav'
import msg from 'msg'

export default {
    components: {
        EasyRing
    }
    data() {
        return {
            open: false,
            ring: false
        }
    },
    methods: {
        openComponent() {
            if (confirm('We need your consent to turn on sound')) {
                this.open = true // â‘  Open the component.
            }
        }
    },
    mounted() {
        this.openComponent()

        msg.listening()

        msg.onReceived(() => {
            this.ring = true // â‘¡ Play Sound Effect.
        })

        msg.onRead(() => {
            this.ring = false // â‘¢ Pause Sound Effect.
        })
    }
}
</script>
```
#### Vue3
```javascript
<template>
    <easy-ring
        :open="open"
        v-model:ring="ring" // Note: Bidirectional binding is required here 
        :src="yourAudio"
    />
</template>

<script setup>
import { ref } from 'vue'
import { EasyRingVueComponent as EasyRing } from 'easy-ring'
import yourAudio from '@/assets/yourAudio.wav'
import msg from 'msg'

const open = ref(false)
const ring = ref(false)
const openComponent = () => {
    if (confirm('We need your consent to turn on sound')) {
        open.value = true // â‘  Open the component.
    }
}

openComponent()
msg.listening()
msg.onReceived(() => {
    ring.value = true // â‘¡ Play Sound Effect.
})

msg.onRead(() => {
    ring.value = false // â‘¢ Pause Sound Effect.
})

</script>
```
Vue2 DEMOï¼šhttps://github.com/xun19/easy-ring/tree/master/easy-ring-demo-vue2
Vue3 DEMOï¼šhttps://github.com/xun19/easy-ring/tree/master/easy-ring-demo-vue3

### 2ï¼‰Use as a React Component
It can be imported and used as a general React component. It is mainly controlled by the 'open' and 'ring' parameters.

- â‘  Open component: Set the 'open' to true.
***PS: This step needs to be triggered in an interaction (e.g. button click), which is to circumvent the limitations of the current browser. See the chapter "Explanation of the open parameter and browser limitations" below for details.***
- â‘¡ Play Sound Effect: Set the 'ring' to true

- â‘¢ Pause Sound Effect: Set the 'ring' to false

According to your own needs or effects, decide when to play and pause the sound effect, and control the update of the ring parameter value under the corresponding logic code

PS: Don't forget to provide a 'setRing' parameter, which is actually the state-updating function corresponding to the 'ring' parameter, and easy-ring will use it to do some automatic state-updating operations. This will make easy-ring more Fool-style and automated.

Refer to the following example:

```javascript
import { useState, useEffect } from 'react'
import { EasyRingReactComponent as EasyRing } from 'easy-ring'
import msg from 'msg'

export default Demo = () => {
    const [open, setOpen] = useState(false)
    const [ring, setRing] = useState(false)

    const getMsg = () => {
        msg.listening()

        msg.onReceived(() => {
            setRing(true) // â‘¡ Play Sound Effect.
        })
        msg.onRead(() => {
            setRing(false) // â‘¢ Pause Sound Effect.
        })
    }
    const openComponent = () => {
        if (confirm('We need your consent to turn on sound')) {
            setOpen(true) // â‘  Open the component.
        }
    }

    useEffect(() => {
        this.openComponent()
        this.getMsg()
    }, [])

    return (
        <div>
          <EasyRing 
            open={this.state.open} 
            ring={this.state.ring}
            setRing={setRing} // NOTE: Remember provide this prop.
          ></EasyRing>
        </div>
    )
}
```
DEMOï¼šhttps://github.com/xun19/easy-ring/tree/master/easy-ring-demo-react

### 3ï¼‰Use with Javascript Function
easy-ring provides a CommonEasyRing class with 4 methods: open( ), ring( ), ,stop ( ) and close( ), which are used to open the component, play the sound effect, pause the sound effect and close the component.

- â‘  Open component: open( )
***PS: This step needs to be triggered in an interaction (e.g. button click), which is to circumvent the limitations of the current browser. See the chapter "Explanation of the open parameter and browser limitations" below for details.***
- â‘¡ Play Sound Effect: ring( )

- â‘¢ Pause Sound Effect: stop ( )

- â‘£ Close the component: close( )

Refer to the following example:

```javascript
const myEasyring = new CommonEasyRing()  

button.addEventListener('click', () => {
    if (confirm('We need your consent to turn on sound')) {
        myEasyring.open() // â‘  Open the component.
    }
})

msg.listening()

msg.onReceived(() => {
    myEasyring.ring() // â‘¡ Play Sound Effect.
})

msg.onRead(() => {
    myEasyring.stop() // â‘¢ Pause Sound Effect.
})

msg.onUnmount(() => {
    myEasyring.close() // â‘£ Close the component.
})
```

## About sound effects
This component has three ways to use sound effects: **Custom Audio Source**, **Custom NMNï¼ˆNumbered musical notationï¼‰ Sound Effects**, and **Built-in default sounds**. You can choose your favorite way according to your needs.

The playback priorities for these three sound effects are: **Custom Audio Source > Custom NMNï¼ˆNumbered musical notationï¼‰ Sound Effects > Built-in default sounds**

### 1ï¼‰Custom Audio Source
Pass your audio file address to the component's src parameter to use a custom audio source.

Absolute paths are used because using relative paths is prone to problems during local builds or packaging, and easy-ring, as a third-party component, cannot find audio files from relative paths in your project.

Getting the absolute path is actually quite straightforward, using the following methods in a Vue or React environment (and possibly other build environments):
```javascript
import yourAudio from '@/assets/yourAudio.wav'
```
At this point, the yourAudio variable is the absolute path to your audio file, and you can pass this variable to the src parameter.

### 2ï¼‰Custom NMNï¼ˆNumbered musical notationï¼‰ Sound Effects
Pass a string of NMNï¼ˆNumbered musical notationï¼‰ to the musicText parameter to use a custom notation sound effect.

For example, the following example shows how to use the sound effects of Little Star:
```javascript
    /* in Vue */
    <EasyRing
      :open="open"
      :ring="ring"
      musicText="1 1 5 5 6 6 5 - 4 4 3 3 2 2 1 - 5 5 4 4 3 3 2 - 5 5 4 4 3 3 2 - 1 1 5 5 6 6 5 - 4 4 3 3 2 2 1 - - - -"
    />

    /* in React */
    <EasyRing
      open={this.state.open}
      ring={this.state.ring}
      musicText="1 1 5 5 6 6 5 - 4 4 3 3 2 2 1 - 5 5 4 4 3 3 2 - 5 5 4 4 3 3 2 - 1 1 5 5 6 6 5 - 4 4 3 3 2 2 1 - - - -"
    />

    /* in JS */
    const myEasyring = new CommonEasyRing({
        musicText: '1 1 5 5 6 6 5 - 4 4 3 3 2 2 1 - 5 5 4 4 3 3 2 - 5 5 4 4 3 3 2 - 1 1 5 5 6 6 5 - 4 4 3 3 2 2 1 - - - -'
    })
```
The value of the musicText parameter needs to be a string consisting mainly of numbers, "-", and spaced by a space.
| character | interpretation | remark                                                         |
| ------ | ------- | ------ |
| .1 ~ .7  | bass | Note that the preceding symbol is "."  |
| 1 ~ 7  | mediant |   |
| 1. ~ 7.  | treble |  Note that the preceding symbol is "." |
| -  | A paused unit | The more consecutive pause units there are, the longer the pause time. For example: "---" represents a pause of three units. |

Here are a few of the notation songs currently built into this component for reference:
| name |       musicText                                          |
| ------ | ------- |
| å°æ˜Ÿæ˜Ÿï¼ˆLITTLE_STARï¼‰ | '1 1 5 5 6 6 5 - 4 4 3 3 2 2 1 - 5 5 4 4 3 3 2 - 5 5 4 4 3 3 2 - 1 1 5 5 6 6 5 - 4 4 3 3 2 2 1 - - - -' |
| ä¸¤åªè€è™ï¼ˆTWO_TIGERSï¼‰ | '1 2 3 1 - 1 2 3 1 - 3 4 5 - 3 4 5 - - 5 6 5 4 3 - 1 - 5 6 5 4 3 - 1 - 2 - .5 - 1 - - 2 - .5 - 1 - - - -' |
| è‰¾å‰å¥¥ä¹‹å®¶ï¼ˆEZIOS_FAMILYï¼‰ | '.6 - 1 - 2 - 3 - .6 - 1 - 2 - 1 - .6 - 1 - 2 - 3 - .6 - 1 - 2 - 1 - .6 - 1 - 2 - 3 - 6 - 7 - 1. - 2. - 3. - - - - - -' |
| å¤©ç©ºä¹‹åŸï¼ˆCASTLE_IN_THE_SKYï¼‰ | '.6 .7 1 - - .7 1 - 3 - .7 - - - - .3 .3 .6 - - .5 .6 - 1 - .5 - - - - .3 .3 .4 - - .3 .4 - 1 - .3 - - - - 1 1 1 .7 - - .4 .4 - .7 - .7 - - - - -' |

### 3ï¼‰Built-in default sound effects
If no value is passed to the src parameter or the musicText parameter, the component will use the default sound effect. The current default sound effect is Ezio's Family, a theme song for the game Assassin's Creed.

You can also change the default sound track by setting the default Music value, the currently supported optional values are: 'LITTLE_STAR', 'TWO_TIGERS', 'EZIOS_FAMILY', 'CASTLE_IN_THE_SKY'.

This is actually the same technology used in the implementation of the custom notation sound function (the Web Audio API). If you have a better, more beautiful melodic notation, please feel free to share it on my github or blog, and consider putting more built-in sound effects into the component in the future. ğŸ˜Š
## Explanation of the open parameter and browser limitations

Most browsers do not currently support autoplay audio, which requires the user to actively trigger the interaction before it can be played. Therefore, the component adds an open parameter to (remind the developer) to do this.

We need to put the control logic of "setting the open parameter to true" in the event callback that triggers the user's interaction behavior, such as the click event of the button, the change event of the switch switch, and so on.

However, you can play down this process with some interaction design to improve the user experience. Like what:
- When the user clicks the "Login" button, set the open parameter to true in the click callback
- Set a sound switch and set the open parameter to true in the change callback
- When clicking on the navigation menu, set the open parameter to true in the click callback
- When clicking to open the message pop-up, set the open parameter to true in the click callback.

The above example is not very suitable for the situation after refreshing the page, in the case of refreshing the page, I personally think that the better way may be:
- Show a dialog asking for "Allow me to turn on sound effects?"

## Thanks
The implementation of the custom sheet music effect is thanks to the inspiration of Zhang Xinxu ã€https://www.zhangxinxu.com/wordpress/2017/06/html5-web-audio-api-js-ux-voice/ ã€‘and Wang Rui
who supports the MusicBox component ğŸ‘ ã€ https://www.jianshu.com/p/4f4c8bbd9775, https://www.zhanhu56.com/h5/music_box/, https://github.com/chchlsh/MusicBox ã€‘, and their inspiration and help make this component more expansive and fun.

## github
https://github.com/xun19/easy-ring

If you think this component has brought you help, welcome to star and provide valuable advice ~ ğŸ˜Š